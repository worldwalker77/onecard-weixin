<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.worldwalker.onecard.weixin.dao.SubsidyDao">

	<resultMap id="subsidyResultMap" type="cn.worldwalker.onecard.weixin.domain.SubsidyModel" >
		<id column="id" property="id"/>
		<result column="id_no" property="idNum"/>
		<result column="f_name" property="fName"/>
		<result column="en_name" property="enName"/>
		<result column="gr_name" property="grName"/>
		<result column="pro_name" property="proName"/>
		<result column="grant_date" property="grantDate"/>
		<result column="bank_status" property="bankStatus"/>
		<result column="pro_id" property="proId"/>
	</resultMap>
	
	<select id="selectSubsidys"  parameterType ="cn.worldwalker.onecard.weixin.domain.SubsidyModel" resultMap="subsidyResultMap">
	    select id_no, f_name, en_name,gr_name,pro_name ,bank_status ,grant_date,pro_id  from cfs_grant_360731
	    where id_no = #{idNum}
	    <if test="startTime != null">
	    	and grant_date &gt; #{startTime}
	  	</if>
	  	<if test="endTime != null">
	    	and grant_date  &lt; #{endTime}
	  	</if>
	    limit #{start},#{limit}
	</select>
	
	<update id="updateIdNum"  parameterType = "map">
		update cfs_grant_360731 
		set id_no = #{newIdNum}
		where id_no = #{oldIdNum}
	</update>
	
</mapper>


